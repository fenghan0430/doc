# ollama模型备份导入导出笔记

> 编写时间: 2024-2-6

ollama是一个从模型下载、模型推理到提供api服务的一站式工具。十分的好用，但是ollama却不支持将下载的模型单个灵活的以文件形式导入导出。

这使得ollama在使用过程中不得不多次从网络下载模型。

更糟的是，ollama的模型托管于cloudflare，中国地区用户下载速度奇慢。

现在，我发现了两种方案用于备份ollama的模型，并可以导入ollama。

### 方法一：在ollama目录复制文件 (实验成功)

ollama在下载模型后，会把模型保存在home目录中的.ollama文件夹。

其中，一个模型分为两个部分，一是配置文件，而是模型层文件。两个文件在ollama文件夹下的 models/manifests 和 models/blobs中。

在备份文件时，先打开配置文件，根据配置文件中的sha256值，在blobs中查找模型层文件。

复制配置文件和对于的模型层文件，到其他机器的.ollama文件夹中的对应位置。

再执行`ollama list`就可以看到模型。

通过这种方法可以快速实现模型备份。简单有效。

### 方法二：建立docker仓库

ollama实际使用的是和docker类似的存储方式，有模型层，配置层和许可证层等。

虽然ollama的开发人员还没有支持使用docker存储的方式，但是在github中，有看到魔改的docker仓库，可以用于存储ollama的层。

可以使用`ollama push`推送，用`ollama pull`拉取。相比于使用复制粘贴的方法，这个才是更为推荐的方案。
